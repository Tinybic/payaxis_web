<div class="row mt-3-1">
    <div class="col-md-8 d-flex align-items-center">
        <div class="font-20 bold-600">Roles</div>
    </div>
    <div class="col-md-4 text-end">
        <div class="d-inline-block ms-1-1">
            <input class="form-control form-search" type="search" placeholder="Search here" [(ngModel)]="keywords"/>
        </div>
        <!-- end search-->
        <button class="btn btn-outline-primary ms-2-1 btn-text-12" (click)="openRoleModal(0)"
                style="margin-top: -1px;padding: 8px 16px;"><i
                class="fe-plus-square me-1-1" style="vertical-align: bottom;"></i>New Role
        </button>
    </div>
</div>
<div class="mt-3" style="height: calc(100% - 240px);">
    <table class="advanced-table no-border">
        <thead>
        <tr>
            <th class="sortable"
                [ngClass]="{'sorting_asc':sortCloumn == 'txtName' && direction == 'asc','sorting_desc':sortCloumn == 'txtName' && direction == 'desc'}"
                (click)="onSort('txtName')" style="width: 20%;">Name
            </th>
            <th class="sortable"
                [ngClass]="{'sorting_asc':sortCloumn == 'email' && direction == 'asc','sorting_desc':sortCloumn == 'email' && direction == 'desc'}"
                (click)="onSort('email')" style="width: 20%;">Email
            </th>
            <th class="sortable"
                [ngClass]="{'sorting_asc':sortCloumn == 'phone' && direction == 'asc','sorting_desc':sortCloumn == 'phone' && direction == 'desc'}"
                (click)="onSort('phone')" style="width: 20%;">Phone
            </th>
            <th class="sortable"
                [ngClass]="{'sorting_asc':sortCloumn == 'notes' && direction == 'asc','sorting_desc':sortCloumn == 'notes' && direction == 'desc'}"
                (click)="onSort('notes')" style="width: 30%;">Notes
            </th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of roles | callback: filterTable; let i = index">
            <td>
                <div class="d-flex flex-row">
                    {{item.contactName}}
                </div>
            </td>
            <td>
                <div class="d-flex flex-row">
                    {{item.email}}
                </div>
            </td>
            <td>
                <div class="d-flex flex-row">
                    {{item.phone | mask: '(000) 000-0000'}}
                </div>
            </td>
            <td>
                <div class="d-flex flex-row">
                    {{item.notes}}
                </div>
            </td>
            <td class="text-end">
                <i class="fe-edit" (click)="$event.stopPropagation();openRoleModal(item.id)"
                   style="cursor: pointer;"></i>
                <i class="fe-trash-2 ms-1-1" (click)="$event.stopPropagation();openDeleteRole(i)"
                   style="cursor: pointer;"></i>
            </td>
        </tr>
        </tbody>
    </table>
    
    <div *ngIf="roles.length==0" class="text-center">
        <div class="Paragraph-1 text-typeblackdeactivated bold-600  mt-40 ">No Roles added yet</div>
        <div class="Paragraph-2 text-typeblackdeactivated mt-1-1">Create new roles in a few clicks
        </div>
        <div class="mt-1-1">
            <button class="btn btn-outline-primary ms-2-1 btn-text-12" (click)="openRoleModal(0)"><i
                    class="fe-plus-square me-1-1" style="vertical-align: bottom;"></i>Add Contact
            </button>
        </div>
    </div>
</div>

<ng-template #addRoleModal let-modal>
    <app-add-role [params]={rolesParams} [modalRef]={modalRef}></app-add-role>
</ng-template>

<ng-template #deleteRoleModal let-modal>
    <div class="modal-body" style="padding: 16px 24px;">
        <div class="headline-24">Deleting Role</div>
        <div class="Subtitle-1-400 mt-3-1 text-start">Account Manager Role will be deleted.</div>
        <div class="mt-3-1 text-end">
            <button class="btn btn-link-primary text-primary" (click)="cancel()" style="padding: 12px 40px;">Cancel
            </button>
            <button class="btn btn-primary" (click)="confirm()" style="padding: 12px 30px;">Confirm</button>
        </div>
    </div>
</ng-template>
