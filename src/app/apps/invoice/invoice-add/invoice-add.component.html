<div style="margin-bottom: 80px;">
    <div class="row">
        <div class="col-md-12  headline text-black" *ngIf="id == 0">
            Add Invoice
        </div>
        <div class="col-md-12  headline text-black" *ngIf="id > 0 && this.projectpayment.status">
            Bill #{{this.projectpayment.billNumber}}
            <div class="d-inline-block {{globalFunc.toCamelCase(projectpayment.status.toLowerCase())}}Tag subtitle-2-600 text-blackprimary-op-50 text-center ms-1-1">{{projectpayment.status}}</div>
        </div>
        <div class="subtitle-2-500 text-typeblack80" *ngIf="id > 0 && this.projectpayment.paymentFiles.length>0">
            Mapped from file
        </div>
    </div>
    <div class="card mt-1-1">
        <div class="card-body padding-16">
            <div class="row">
                <div class="col-md-6 subtitle-400-12-32-up">
                    Contact
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer"
                     *ngIf="(vendor || (newVendor && newVendorShow)) && projectpayment.status != 'Paid'" (click)="removeVendor()">
                    Edit Contact
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer"
                     *ngIf="newVendor && !newVendorShow  && projectpayment.status != 'Paid'"
                     (click)="showVendor()">
                    Select Contact
                </div>
            </div>
            
            <div class="row mt-2-1">
                <div class="col-md-12">
                    <div ngbDropdown #vendorDropdown="ngbDropdown">
                        
                        <div *ngIf="vendor" style="border:1px solid #E1E6EF; border-radius: 8px; padding: 8px 16px;">
                            <div class="row">
                                <div class="col-md-8 Subtitle-1 text-start">
                                    <div>{{vendor.vendorName}}</div>
                                    <div class="subtitle-2-400-12 text-typeblack80"
                                         *ngIf="vendor.txtAddress && vendor.txtCity">
                                        {{vendor.txtAddress}},
                                        {{vendor.txtCity}},
                                        {{vendor.txtState}},
                                        {{vendor.txtZipcode}}</div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="vendorCostcode subtitle-2-600 d-inline-block"
                                         *ngIf="vendor.costcodes && vendor.costcodes.length > 0">
                                        <span *ngFor="let costcode of vendor.costcodes">{{costcode.txtName}}</span>
                                    </div>
                                    <div class="d-inline-block ms-1-1"><i class="fe-external-link text-primary"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-1-1 pt-1-1" style="border-top: 1px solid #E1E6EF;">
                                <div class="col-md-9">
                                    <div class="btn-text-12 text-start">{{vendor.primaryContact}}</div>
                                    <div class="text-typeblackdeactivated">Manager</div>
                                    <div class="subtitle-2-400-12 ">{{vendor.email}}</div>
                                    <div class="subtitle-2-400-12 ">{{vendor.phone}}</div>
                                </div>
                                <div class="col-md-3 text-end">
                                    <app-avatar [bgColor]="'bg-info'" color="text-white" [url]="vendor.avatar"
                                                [firstName]="vendor.firstName" [lastName]="vendor.lastName" [size]="32"
                                                alt="user-img" class="ms-2"></app-avatar>
                                </div>
                            </div>
                            <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                                 (click)="resetValue(1)"
                                 *ngIf="handleData && (handleData.idVendor!=vendor.id && handleData.idVendor!= 0)">
                                <i class="fe-copy me-1-1"></i>Reset to: {{handleData.vendorName}}
                            </div>
                        </div>
                        
                        <input *ngIf="!vendor && !newVendor" class="form-control form-search" type="search"  [disabled]=" projectpayment.status == 'Paid'"
                               placeholder="Find Contact" [(ngModel)]="keywordsVendor"  (ngModelChange)="vendorFilter(vendorDropdown)" [ngClass]="{'is-invalid':txtError.idVendor == 0}" ngbDropdownToggle/>
                        <div *ngIf="txtError.idVendor == 0" class="invalid-feedback" i18n>
                            <i class="fe-alert-triangle invalid-feedback-icon"></i>
                            Contact required
                        </div>
                        <div class="row" *ngIf="newVendor && !newVendorShow">
                            <div class="col-md-6">
                                <label class="form-label" i18n>New Contact name</label>
                                <input type="text" class="form-control" placeholder="New Vendor name"
                                       [(ngModel)]="projectpayment.vendorName"/>
                                <div class="mt-1-1" *ngIf="this.createVendorList.length == 0 && false">
                                    <i class="fe-alert-triangle me-1-1" style="color: #EAC608;"></i>Contact will be
                                    created
                                    as Draft
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" i18n>Email</label>
                                <input type="text" class="form-control" placeholder="Email"
                                       [(ngModel)]="projectpayment.vendorEmail"/>
                            </div>
                        </div>
                        <div *ngIf="newVendor && newVendorShow">
                            <div class="row" style="border: 1px solid #E1E6EF;border-radius: 8px;padding: 16px;">
                                <div class="col-md-8 Subtitle-1 text-start">
                                    <div>{{projectpayment.vendorName}}</div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="d-inline-block ms-1-1"><i class="fe-external-link text-primary"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="padding-16" class="dropdown-menu"
                             style="border:1px solid #E1E6EF;  margin-top: -44px; width: 100%; max-height: 362px; overflow-x: hidden; overflow-y: scroll;"
                             ngbDropdownMenu>
                            <div ngbDropdownItem class="cursor-pointer" (click)="createVendor()">
                                <div class="row">
                                    <div class="col-md-8 Subtitle-1 text-start">
                                        New Contact
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-1-1 mb-1-1">
                                <div class="col-md-12" style="border-bottom: 1px solid #E1E6EF;"></div>
                            </div>
                            <div ngbDropdownItem class="cursor-pointer" *ngFor="let item of vendorList"
                                 (click)="selectVendor(item)">
                                <div class="row">
                                    <div class="col-md-8 Subtitle-1 text-start">
                                        <div>{{item.vendorName}}</div>
                                        <div class="subtitle-2-400-12 text-typeblack80"
                                             *ngIf="item.txtAddress && item.txtCity">
                                            {{item.txtAddress}},
                                            {{item.txtCity}},
                                            {{item.txtState}},
                                            {{item.txtZipcode}}</div>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <div class="vendorCostcode subtitle-2-600" *ngIf="item.costcodes && item.costcodes.length > 0">
                                            <span *ngFor="let costcode of item.costcodes">{{costcode.txtName}}</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="row mt-1-1 pt-1-1" style="border-top: 1px solid #E1E6EF;">
                                    <div class="col-md-9">
                                        <div class="btn-text-12 text-start">{{item.primaryContact}}</div>
                                        <div class="text-typeblackdeactivated">Manager</div>
                                        <div class="subtitle-2-400-12 ">{{item.email}}</div>
                                        <div class="subtitle-2-400-12 ">{{item.phone}}</div>
                                    </div>
                                    <div class="col-md-3 text-end">
    
                                    </div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mt-2-1">
        <div class="card-body padding-16">
            <div class="row">
                <div class="col-md-6 subtitle-400-12-32-up">
                    Payment Details
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer">
                    <!-- Edit Deposit Account -->
                </div>
            </div>
            
            <div class="row mt-2-1">
                <div class="col-md-12 subtitle-2-500  text-center">
                    Amount Due
                </div>
            </div>
            
            <div class="row p-3 mt-1-1" style="border-bottom: 1px solid #E1E6EF;">
                <div class="col-md-12 text-center overflow-hidden">
                    <input #amount type="text" *ngIf="amountEdit" mask="separator.2" (blur)="cancelAmount()"[disabled]=" projectpayment.status == 'Paid'"
                           class=" subtitle-700-37-40" style="border: 0px;outline: 0;text-align: center;"
                           [(ngModel)]="projectpayment.amount"/>
                    <label class="subtitle-700-37-40 cursor-pointer" (click)="editAmount()"
                           *ngIf="!amountEdit">{{projectpayment.amount | currency}}</label>
                </div>
                <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer" (click)="resetValue(2)"
                     *ngIf="handleData && (handleData.amount!=projectpayment.amount && handleData.amount!= 0)">
                    <i class="fe-copy me-1-1"></i>Reset to: {{handleData.amount}}
                </div>
            </div>
            
            <div class="row mt-2-1">
                
                <div class="col-md-4">
                    <label class="form-label" i18n>Invoice Number</label>
                    <input type="text" class="form-control" placeholder="Add Number" [disabled]=" projectpayment.status == 'Paid'"
                           [(ngModel)]="projectpayment.billNumber"/>
                    <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                         (click)="resetValue(3)"
                         *ngIf="handleData && (handleData.invoiceNumber!=projectpayment.billNumber && handleData.invoiceNumber!= 0)">
                        <i class="fe-copy me-1-1"></i>Reset to: {{handleData.invoiceNumber}}
                    </div>
                </div>
                <div class="col-md-4">
                    <label class="form-label" i18n>Invoiced Date</label>
                    <input type="date" class="form-control" placeholder="Add Sent Date" [disabled]=" projectpayment.status == 'Paid'"
                           [(ngModel)]="projectpayment.sentDate"/>
                    <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                         (click)="resetValue(5)"
                         *ngIf="handleData && (handleData.invoicedDate!=projectpayment.sentDate && handleData.invoicedDate.length>0)">
                        <i class="fe-copy me-1-1"></i>Reset to: {{handleData.invoicedDate}}
                    </div>
                </div>
                <div class="col-md-4">
                    <label class="form-label" i18n>Due Date</label>
                    <input type="date" class="form-control" placeholder="Add Due Date" [disabled]=" projectpayment.status == 'Paid'"
                           [(ngModel)]="projectpayment.dueDate"/>
                    <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                         (click)="resetValue(4)"
                         *ngIf="handleData && (handleData.indvoicedueDate!=projectpayment.dueDate && handleData.indvoicedueDate.length>0)">
                        <i class="fe-copy me-1-1"></i>Reset to: {{handleData.indvoicedueDate}}
                    </div>
                </div>
                
            </div>
            
            <!-- <div class="row mt-2-1">
                <div class="col-md-6  subtitle-2-500">
                    Deposit Account
                </div>
                <div class="col-md-6 text-end">
                </div>
            </div> -->
            <!-- <div ngbDropdown>
                <div class="row mt-1-1 cursor-pointer" style="border:1px solid #E5E7EB; border-radius: 16px; padding: 16px;"
                    ngbDropdownToggle>
                    <div class="col-md-4 subtitle-2-500">
                        <img class=" me-1-1" src="/assets/images/ach.png" />ACH
                    </div>
                    <div class="col-md-8 text-end">
                        <div class="Subtitle-1 text-end">****{{payment.account}}</div>
                        <div class="subtitle-2-400-12 text-end text-typeblack80">{{payment.bankName}}</div>
                    </div>
                </div>
    
                <div ngbDropdownMenu aria-labelledby="s" style="width: 100%;">
                    <div *ngFor="let item of paymentList" (click)="selectPayment(item)" class="mt-1-1 cursor-pointer"
                        style="border:1px solid #E5E7EB; border-radius: 16px; padding: 16px;width: 100%;" ngbDropdownItem>
                        <div class="row">
                            <div class="col-md-4 subtitle-2-500">
                                <img class=" me-1-1" src="/assets/images/ach.png" />ACH
                            </div>
                            <div class="col-md-8 text-end">
                                <div class="Subtitle-1 text-end">****{{item.account}}</div>
                                <div class="subtitle-2-400-12 text-end text-typeblack80">{{item.bankName}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
    
    <div class="card mt-2-1">
        <div class="card-body padding-16">
            <div class="row">
                <div class="col-md-6 subtitle-400-12-32-up">
                    PROJECT
                </div>
                <div class="col-md-6 subtitle-2-400-12 text-end text-typeblack80" *ngIf="!project">
                    Optional
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer" *ngIf="project && projectpayment.status != 'Paid'"
                     (click)="removeProject()">
                    Edit Project
                </div>
            </div>
            
            <div class="row  mt-1-1">
                <div class="col-md-12">
                    <div ngbDropdown>
                        <div *ngIf="project" style="border:1px solid #E1E6EF; border-radius: 8px; padding: 8px 16px;">
                            <div class="row cursor-pointer">
                                <div class="col-md-10 Subtitle-1 text-start line-32">
                                    {{project.projectName}}
                                </div>
                                <div class="col-md-2 line-32 text-end">
                                    <i class="fe-external-link text-primary"></i>
                                </div>
                            </div>
                            <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                                 (click)="resetValue(6)"
                                 *ngIf="handleData && (handleData.idProject!=project.id && handleData.idProject!= 0)">
                                <i class="fe-copy me-1-1"></i>Reset to: {{handleData.projectName}}
                            </div>
                        </div>
                        <input *ngIf="!project" class="form-control form-search" type="search"  [disabled]=" projectpayment.status == 'Paid'"
                               placeholder="Find Project"
                               [(ngModel)]="keywordsProject" (keyup)="projectFilter()" ngbDropdownToggle/>
                        <div class="padding-16"
                             style=" border:1px solid #E1E6EF;  margin-top: -44px; width: 100%; max-height: 404px; overflow-x: hidden; overflow-y: scroll;"
                             ngbDropdownMenu>
                            <div *ngFor="let item of projectGroupList">
                                <div class="subtitle-2-400-14 bold-600 mb-1-1" style="color: #215EA9;">
                                    {{item[0].groupName}}</div>
                                <div ngbDropdownItem *ngFor="let project of item">
                                    <div class="row cursor-pointer" (click)="selectProject(project)">
                                        <div class="col-md-12 Subtitle-1 text-start line-32">
                                            {{project.projectName}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mt-2-1">
        <div class="card-body padding-16">
            <div class="row">
                <div class="col-md-6  subtitle-400-12-32-up">
                    {{orderCostCodeText}}
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer" *ngIf="!showCostcode && projectpayment.status != 'Paid'"
                     (click)="showFindOrder()">
                    Find Cost Code
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer" *ngIf="showCostcode && !order && projectpayment.status != 'Paid'"
                     (click)="showFindCostCode()">
                    Find Order
                </div>
                <div class="col-md-6 btn-text-12 text-end text-primary cursor-pointer" *ngIf="showCostcode && order && projectpayment.status != 'Paid'"
                     (click)="removOrder()">
                    Edit Order
                </div>
            </div>
            
            <div class="row mt-1-1" *ngIf="!showCostcode">
                <div class="col-md-12">
                    <div ngbDropdown>
                        
                        <div *ngIf="order" style="border:1px solid #E1E6EF; border-radius: 8px; padding: 8px 16px;">
                            <div class="row">
                                <div class="col-md-8 Subtitle-1 text-start">
                                    <div class="d-flex align-items-center">{{order.orderNumber}}
                                        <div class="d-inline-block badge {{globalFunc.toCamelCase(order.status.toLowerCase())}}Tag subtitle-2-600 text-blackprimary-op-50 text-center ms-1-1">{{order.status}}</div>
                                    </div>
                                    <div class="subtitle-2-400-12 text-typeblackdeactivated">{{order.projectName}}</div>
                                    
                                    <div class="vendorCostcode subtitle-2-600 d-inline-block mt-1-1">{{order.costCodeName}}
                                    </div>
                                </div>
                                <div class="col-md-4 d-flex flex-row-reverse">
                                    <div class="ms-1-1 text-center" style="width: 32px;">
                                        <i class="fe-external-link text-primary"></i>
                                    </div>
                                    <div class="text-end">
                                        <div class="search-text text-end">{{order.remainingAmount | currency}}</div>
                                        <div class="text-typeblackdeactivated">Remaining Amount</div>
                                        <div class="Subtitle-1 text-end">{{order.total | currency}}</div>
                                        <div class="text-typeblackdeactivated">Total Due</div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-primary subtitle-2-400-12 mt-1-1 text-center cursor-pointer"
                                 (click)="resetValue(7)"
                                 *ngIf="handleData && (handleData.idOrder1!=order.id && handleData.idOrder1!= 0)">
                                <i class="fe-copy me-1-1"></i>Reset to: {{handleData.orderNumber}}
                            </div>
                        </div>
                        
                        <input *ngIf="!order" class="form-control form-search" type="search" placeholder="Find Order"  [disabled]=" projectpayment.status == 'Paid'"
                               [(ngModel)]="keywordsOrder" (keyup)="orderFilter()" ngbDropdownToggle/>
                        <div class="padding-16"
                             style="border:1px solid #E1E6EF; margin-top: -44px; width: 100%; max-height: 362px; overflow-x: hidden; overflow-y: scroll;"
                             ngbDropdownMenu>
                            <div ngbDropdownItem *ngFor="let item of orderList">
                                <div class="row cursor-pointer" (click)="selectOrder(item)">
                                    <div class="col-md-8 Subtitle-1 text-start">
                                        <div class="d-flex align-items-center">{{item.orderNumber}}
                                            <div class="d-inline-block badge {{globalFunc.toCamelCase(item.status.toLowerCase())}}Tag subtitle-2-600 text-blackprimary-op-50 text-center ms-1-1">{{item.status}}</div>
                                        </div>
                                        <div class="subtitle-2-400-12 text-typeblackdeactivated">{{item.projectName}}</div>
                                        
                                        <div class="vendorCostcode subtitle-2-600 d-inline-block mt-1-1">{{item.costCodeName}}
                                        </div>
                                    </div>
                                    <div class="col-md-4 d-flex flex-row-reverse">
                                        <div class="text-end">
                                            <div class="search-text text-end">{{item.remainingAmount | currency}}</div>
                                            <div class="text-typeblackdeactivated">Remaining Amount</div>
                                            <div class="Subtitle-1 text-end">{{item.total | currency}}</div>
                                            <div class="text-typeblackdeactivated">Total Due</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-1-1" *ngIf="showCostcode">
                <div class="col-md-12">
                    <div class="dropdown" ngbDropdown>
                        <input class="form-select" type="text" id="invoiceCostCode" [(ngModel)]="vendorcostcodesText"
                               required i18n-placeholder placeholder="Assign Cost Code" ngbDropdownToggle/>
                        <div style="max-height: 300px; overflow-y: auto;" class="dropdown-menu"
                             aria-labelledby="vendorcostcodes" ngbDropdownMenu>
                            <div>
                                <input auto-complete="off" type="search" class="form-control form-search"
                                       [(ngModel)]="keywordsCostCode" (keyup)="costCodeFilter()"/>
                            </div>
                            <div *ngFor="let item of costCodeList">
                                <div style="color: #215EA9; font-weight: 600; margin-bottom: 8px; margin-top: 8px;"
                                     *ngIf="item.costcodelist && item.costcodelist.length>0">
                                    {{item.txtName}}
                                </div>
                                <div class="mb-1" *ngFor="let costcode of item.costcodelist">
                                    <div>
                                        <input type="checkbox" class="form-check-input"
                                               [checked]="setCostCodeSelect(costcode.costCode)"
                                               (change)="costCodeSelect($event,costcode)"
                                               id="dropdownCheck{{costcode.costCode}}">
                                        <label class="form-check-label ms-1-1" for="dropdownCheck{{costcode.costCode}}">
                                            {{costcode.txtName}}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-2-1 mb-2-1" *ngIf="!showNotes">
        <div class="col-md-12" *ngIf="!file">
            <ngx-dropzone (change)="onSelectDocument($event)" class="dropzone justify-content-center" [disabled]="projectpayment.status == 'Paid'"
                          style="width: 100%;height: 208px;min-height: unset !important;border: 1px solid #2B52DD !important;background-color: #F7FAFC !important;border-radius: 16px !important;overflow: hidden;padding: 0 !important;"
                          #drop>
                <ngx-dropzone-label class="d-flex flex-column align-items-center" >
                    <div
                            style="height: 56px; width: 56px; background-color: #73B2FF33; color: #2B52DD; border-radius: 56px; text-align: center; line-height: 56px;">
                        <i class="fe-upload-cloud font-24"></i>
                        <img src="/assets/images/ico_ai.png"
                             style="position: relative;margin-top: -167px;margin-left: 28px;"/>
                    </div>
                    <div class="btn-text-12 mt-2-1"
                         style="letter-spacing: 1.5px;color: #2B52DD; text-transform: uppercase;">Drag Documents and Let
                        <br/>
                        Payaxis AI Fill out the Bill for you
                    </div>
                </ngx-dropzone-label>
            </ngx-dropzone>
        </div>
        <div class="col-md-12" *ngIf="file">
            <div class="Subtitle-1 text-start">
                Uploading (1)
            </div>
            <div class="d-flex flex-row align-items-center mt-2-1">
                <div style="width: calc(100% - 110px);float: left;" class="subtitle-2-600 text-overflow-ellipsis">
                    <i class="fe-file me-1-1"></i>{{file.fileName}}
                </div>
                <div class="d-flex flex-row subtitle-2-500 cursor-pointer" (click)="cancelUploading(file)"
                     style="width: 110px;float: right;" *ngIf="!mappingFlag">
                    <img class="me-1-1" src="../../../assets/images/stop-circle.png"
                         style="width: 16px;height: 16px;margin-top: 4px;">
                    Cancel Upload
                </div>
                <div class="d-flex flex-row subtitle-2-500 cursor-pointer" style="width: 110px;float: right;"
                     *ngIf="mappingFlag">
                    <img class="me-1-1" src="../../../assets/images/loader.png"
                         style="width: 16px;height: 16px;margin-top: 4px;">
                    Mapping..
                </div>
            </div>
            <div class="progress progress-sm" style="margin-top: 8px;height: 8px !important;" *ngIf="!mappingFlag">
                <div class="progress-bar wow bg-primary-progress" role="progressbar" aria-valuemin="0"
                     aria-valuemax="100"
                     style="width: {{file.uploadProgress}}%;">
                </div><!-- /.progress-bar .progress-bar-success -->
            </div><!-- /.progress .no-rounded -->
        </div>
    </div>
    
    <div class="card mt-2-1" *ngIf="showNotes ">
        <div class="card-body padding-16">
            <div class="row">
                <div class="row">
                    <div class="col-md-6 subtitle-400-12-32-up">
                        mapped file
                    </div>
                    <div class="col-md-6 text-end">
                        <div (click)="downloadFile(file.fileUrl,file.fileName)"  class="btn btn-outline-primary padding-8-16">
                            <i class="fe-download me-1-1"></i> Download</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mt-1-1">
                        <div style="padding: 8px 16px; border-radius: 8px; border:1px solid #E1E6EF; display: flex;">
                            <img src="/assets/images/ico_ai.png" style="height: 24px; width: 24px;"
                                 onerror="javascript:this.src='/assets/images/icon/dat.png';"/>
                            &nbsp;&nbsp;
                            <div class="bold-600"
                                 style="flex: 1;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;line-height: 24px;">
                                {{file.fileName}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mt-2-1 mb-4-1" *ngIf="showNotes">
        <div class="card-body padding-16">
            <div class="row">
                <div class="col-md-6 subtitle-400-12-32-up">
                    Notes & Attachments
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-outline-primary padding-8-16" [disabled]="projectpayment.status == 'Paid'" (click)="drop.showFileSelector()">Add
                        Attachments
                    </button>
                </div>
            </div>
            <div class="row mt-2-1">
                <div class="col-md-12 ">
                <textarea class="form-control" [(ngModel)]="projectpayment.txtNotes"
                          style="padding: 12px 16px; border-radius: 8px; width: 100%; height: 129px;"
                          placeholder="Notes & Description">
                </textarea>
                </div>
            </div>
            <div class="row mt-2-1">
                <div class="col-md-6 mt-1-1" *ngFor="let item of projectpayment.paymentFiles| slice:1; let i = index; ">
                    <div style="padding: 8px 16px; border-radius: 8px; border:1px solid #E1E6EF; display: flex;">
                        <img src="/assets/images/icon/{{item.fileType}}.png" style="height: 24px; width: 24px;"
                             onerror="javascript:this.src='/assets/images/icon/dat.png';"/>
                        &nbsp;&nbsp;
                        <div class="bold-600"
                             style="flex: 1;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;line-height: 24px;">
                            {{item.fileName}}</div>
                        <i class="fe-x float-end text-danger cursor-pointer line-24"
                           (click)="openDeleteModal(i,item)"></i>
                    </div>
                </div>
            </div>
            <div class="row mt-2-1">
                <div class="col-md-12 ">
                    <ngx-dropzone (change)="onSelectDocument($event)" class="dropzone justify-content-center" [disabled]=" projectpayment.status == 'Paid'"
                                  style="width: 100%;height: 120px;min-height: unset !important;border: 1px solid #2B52DD !important;background-color: #F7FAFC !important;border-radius: 16px !important;overflow: hidden;padding: 0 !important;"
                                  #drop>
                        <ngx-dropzone-label class="d-flex flex-column align-items-center">
                            <div
                                    style="height: 56px; width: 56px; background-color: #73B2FF33; color: #2B52DD; border-radius: 56px; text-align: center; line-height: 56px;">
                                <i class="fe-upload-cloud font-24"></i>
                            </div>
                            <div class="btn-text-12"
                                 style="letter-spacing: 1.5px;color: #2B52DD; text-transform: uppercase;">drag file here
                            </div>
                        </ngx-dropzone-label>
                    </ngx-dropzone>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="row" *ngIf="id == 0">
    <div class="col-md-6 d-grid">
        <button type="button" class="btn btn-outline-primary" (click)="closeModal()">Cancel</button>
    </div>
    <div class="col-md-6 d-grid">
        <button type="button" class="btn btn-primary" (click)="findVendor()"
                [disabled]="projectpayment.idVendor == 0 || !(this.projectpayment.dueDate)|| !this.projectpayment.sentDate || !this.projectpayment.billNumber">Save
            and Review
        </button>
    </div>
</div>

<div class="row" *ngIf="id > 0 && projectpayment.status == 'Sent'"
     style="height: 72px;background-color: #2B2D30;box-shadow: 0px 25px 50px 0px #00000040;padding: 16px 32px;position: fixed;bottom: 0;width: 100%;margin-left: -32px;z-index: 9999;">
    <div class="col-md-4 d-grid">
        <button class="btn btn-primary"
                style="border:1px solid #ffffff; box-shadow: none; background-color: #2B2D30;" (click) ="decline()">Decline
        </button>
    </div>
    <div class="col-md-4 d-grid">
        <button class="btn btn-primary" (click)="openPayingBill()" style="border:0px; box-shadow: none;">Pay Now
        </button>
    </div>
    <div class="col-md-4 d-grid">
        <button class="btn btn-primary" style="border:0px; box-shadow: none;" (click)="update()">Save</button>
    </div>
</div>

<div class="modal-x" (click)="closeModal()">
    <i class="fe-x"></i>
</div>


<ng-template #deleteModal let-modal>
    <div class="delete-modal-container">
        <input type="text" style="display: none;"/>
        <div class="row">
            <div class="col-md-10">
                <div class="headline-24 text-start">Delete the files</div>
            </div>
            <div class="col-md-2 text-end text-black">
                <i class="fe-x cursor-pointer bold-600" (click)="cancelDelete()"></i>
            </div>
        </div>
        <div class="delete-alert-content text-start">
            Do you want to delete this files ?
        </div>
        <div class="d-flex justify-content-end mt-3">
            <div class="delete-cancel-button mt-0 line-40 cursor-pointer" (click)="cancelDelete()">
                Cancel
            </div>
            <div>
                <button class="btn btn-primary ms-2-1" (click)="fileDelete()">Yes</button>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #newVendorListModal let-modal>
    <div class="delete-modal-container">
        <input type="text" style="display: none;"/>
        <div class="row">
            <div class="col-md-10">
                <div class="headline-24 text-start">New Vendor Creation</div>
            </div>
            <div class="col-md-2 text-end text-black">
                <i class="fe-x cursor-pointer bold-600" (click)="cancelNewVendor()"></i>
            </div>
        </div>
        <div class="delete-alert-content text-start">
            Email <b>{{projectpayment.vendorEmail}}</b> is associated with {{createVendorList.length}} vendor<span
                *ngIf="createVendorList.length>1">s</span>. Do you want to create new Vendor with
            this email or use the existed one?
            <div *ngFor="let item of createVendorList; let i = index">
                <div class="form-check mt-1-1 form-check-default d-flex align-items-center">
                    <input type="radio" name="newVendorListItem" [value]="item.idInvitedCompany"
                           [(ngModel)]="projectpayment.idInvitedCompany" id="customradio{{item.idInvitedCompany}}"
                           class="form-check-input me-1-1">
                    <label for="customradio{{item.idInvitedCompany}}"
                           class="form-check-label">{{item.companyName}}</label>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end mt-3">
            <div class="delete-cancel-button mt-0 line-40 cursor-pointer" (click)="cancelNewVendor()">
                Cancel
            </div>
            <div>
                <button class="btn btn-primary ms-2-1" (click)="CreateNewVendor()">Continue</button>
            </div>
        </div>
    </div>
</ng-template>


<ng-template #noVendorModal let-modal>
    <div class="delete-modal-container">
        <input type="text" style="display: none;"/>
        <div class="row">
            <div class="col-md-10">
                <div class="headline-24 text-start">Vendor Not Found</div>
            </div>
            <div class="col-md-2 text-end text-black">
                <i class="fe-x cursor-pointer bold-600" (click)="modal.dismiss()"></i>
            </div>
        </div>
        <div class="d-flex justify-content-end mt-3">
            <div>
                <button class="btn btn-primary ms-2-1" (click)="modal.dismiss()">OK</button>
            </div>
        </div>
    </div>
</ng-template>


<ng-template #payingBill>
    <app-paying-bill [payment]="projectpayment" [vendor]="vendor" [modalRef]="payingBillModalRef"></app-paying-bill>
</ng-template>
